<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File Server</title>
    <style>
    /*! tailwindcss v4.1.6 | MIT License | https://tailwindcss.com */
    @layer properties;
    @layer theme, base, components, utilities;
    @layer theme {
      :root, :host {
        --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
          "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
        --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
          "Courier New", monospace;
        --color-red-100: oklch(93.6% 0.032 17.717);
        --color-red-200: oklch(88.5% 0.062 18.334);
        --color-red-400: oklch(70.4% 0.191 22.216);
        --color-red-500: oklch(63.7% 0.237 25.331);
        --color-red-600: oklch(57.7% 0.245 27.325);
        --color-red-800: oklch(44.4% 0.177 26.899);
        --color-green-100: oklch(96.2% 0.044 156.743);
        --color-green-200: oklch(92.5% 0.084 155.995);
        --color-green-400: oklch(79.2% 0.209 151.711);
        --color-green-500: oklch(72.3% 0.219 149.579);
        --color-green-600: oklch(62.7% 0.194 149.214);
        --color-green-800: oklch(44.8% 0.119 151.328);
        --color-blue-50: oklch(97% 0.014 254.604);
        --color-blue-100: oklch(93.2% 0.032 255.585);
        --color-blue-200: oklch(88.2% 0.059 254.128);
        --color-blue-400: oklch(70.7% 0.165 254.624);
        --color-blue-500: oklch(62.3% 0.214 259.815);
        --color-blue-600: oklch(54.6% 0.245 262.881);
        --color-blue-700: oklch(48.8% 0.243 264.376);
        --color-blue-800: oklch(42.4% 0.199 265.638);
        --color-gray-100: oklch(96.7% 0.003 264.542);
        --color-gray-200: oklch(92.8% 0.006 264.531);
        --color-gray-300: oklch(87.2% 0.01 258.338);
        --color-gray-400: oklch(70.7% 0.022 261.325);
        --color-gray-500: oklch(55.1% 0.027 264.364);
        --color-gray-600: oklch(44.6% 0.03 256.802);
        --color-gray-700: oklch(37.3% 0.034 259.733);
        --color-gray-800: oklch(27.8% 0.033 256.848);
        --color-gray-900: oklch(21% 0.034 264.665);
        --color-white: #fff;
        --spacing: 0.25rem;
        --container-xs: 20rem;
        --text-xs: 0.75rem;
        --text-xs--line-height: calc(1 / 0.75);
        --text-sm: 0.875rem;
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-lg: 1.125rem;
        --text-lg--line-height: calc(1.75 / 1.125);
        --text-2xl: 1.5rem;
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: 2.25rem;
        --text-4xl--line-height: calc(2.5 / 2.25);
        --font-weight-normal: 400;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --font-weight-extrabold: 800;
        --radius-md: 0.375rem;
        --radius-lg: 0.5rem;
        --ease-out: cubic-bezier(0, 0, 0.2, 1);
        --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --default-font-family: var(--font-sans);
        --default-mono-font-family: var(--font-mono);
      }
    }
    @layer base {
      *, ::after, ::before, ::backdrop, ::file-selector-button {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        border: 0 solid;
      }
      html, :host {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        tab-size: 4;
        font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");
        font-feature-settings: var(--default-font-feature-settings, normal);
        font-variation-settings: var(--default-font-variation-settings, normal);
        -webkit-tap-highlight-color: transparent;
      }
      hr {
        height: 0;
        color: inherit;
        border-top-width: 1px;
      }
      abbr:where([title]) {
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }
      h1, h2, h3, h4, h5, h6 {
        font-size: inherit;
        font-weight: inherit;
      }
      a {
        color: inherit;
        -webkit-text-decoration: inherit;
        text-decoration: inherit;
      }
      b, strong {
        font-weight: bolder;
      }
      code, kbd, samp, pre {
        font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);
        font-feature-settings: var(--default-mono-font-feature-settings, normal);
        font-variation-settings: var(--default-mono-font-variation-settings, normal);
        font-size: 1em;
      }
      small {
        font-size: 80%;
      }
      sub, sup {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }
      sub {
        bottom: -0.25em;
      }
      sup {
        top: -0.5em;
      }
      table {
        text-indent: 0;
        border-color: inherit;
        border-collapse: collapse;
      }
      :-moz-focusring {
        outline: auto;
      }
      progress {
        vertical-align: baseline;
      }
      summary {
        display: list-item;
      }
      ol, ul, menu {
        list-style: none;
      }
      img, svg, video, canvas, audio, iframe, embed, object {
        display: block;
        vertical-align: middle;
      }
      img, video {
        max-width: 100%;
        height: auto;
      }
      button, input, select, optgroup, textarea, ::file-selector-button {
        font: inherit;
        font-feature-settings: inherit;
        font-variation-settings: inherit;
        letter-spacing: inherit;
        color: inherit;
        border-radius: 0;
        background-color: transparent;
        opacity: 1;
      }
      :where(select:is([multiple], [size])) optgroup {
        font-weight: bolder;
      }
      :where(select:is([multiple], [size])) optgroup option {
        padding-inline-start: 20px;
      }
      ::file-selector-button {
        margin-inline-end: 4px;
      }
      ::placeholder {
        opacity: 1;
      }
      @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {
        ::placeholder {
          color: currentcolor;
          @supports (color: color-mix(in lab, red, red)) {
            color: color-mix(in oklab, currentcolor 50%, transparent);
          }
        }
      }
      textarea {
        resize: vertical;
      }
      ::-webkit-search-decoration {
        -webkit-appearance: none;
      }
      ::-webkit-date-and-time-value {
        min-height: 1lh;
        text-align: inherit;
      }
      ::-webkit-datetime-edit {
        display: inline-flex;
      }
      ::-webkit-datetime-edit-fields-wrapper {
        padding: 0;
      }
      ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {
        padding-block: 0;
      }
      :-moz-ui-invalid {
        box-shadow: none;
      }
      button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {
        appearance: button;
      }
      ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {
        height: auto;
      }
      [hidden]:where(:not([hidden="until-found"])) {
        display: none !important;
      }
    }
    @layer utilities {
      .visible {
        visibility: visible;
      }
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }
      .container {
        width: 100%;
        @media (width >= 40rem) {
          max-width: 40rem;
        }
        @media (width >= 48rem) {
          max-width: 48rem;
        }
        @media (width >= 64rem) {
          max-width: 64rem;
        }
        @media (width >= 80rem) {
          max-width: 80rem;
        }
        @media (width >= 96rem) {
          max-width: 96rem;
        }
      }
      .mx-auto {
        margin-inline: auto;
      }
      .mt-4 {
        margin-top: calc(var(--spacing) * 4);
      }
      .mr-2 {
        margin-right: calc(var(--spacing) * 2);
      }
      .mb-2 {
        margin-bottom: calc(var(--spacing) * 2);
      }
      .mb-4 {
        margin-bottom: calc(var(--spacing) * 4);
      }
      .mb-6 {
        margin-bottom: calc(var(--spacing) * 6);
      }
      .mb-8 {
        margin-bottom: calc(var(--spacing) * 8);
      }
      .flex {
        display: flex;
      }
      .hidden {
        display: none;
      }
      .h-2 {
        height: calc(var(--spacing) * 2);
      }
      .h-3 {
        height: calc(var(--spacing) * 3);
      }
      .h-5 {
        height: calc(var(--spacing) * 5);
      }
      .w-3 {
        width: calc(var(--spacing) * 3);
      }
      .w-5 {
        width: calc(var(--spacing) * 5);
      }
      .w-20 {
        width: calc(var(--spacing) * 20);
      }
      .w-full {
        width: 100%;
      }
      .translate-x-0 {
        --tw-translate-x: calc(var(--spacing) * 0);
        translate: var(--tw-translate-x) var(--tw-translate-y);
      }
      .translate-x-full {
        --tw-translate-x: 100%;
        translate: var(--tw-translate-x) var(--tw-translate-y);
      }
      .transform {
        transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);
      }
      .flex-col {
        flex-direction: column;
      }
      .items-center {
        align-items: center;
      }
      .justify-between {
        justify-content: space-between;
      }
      .justify-center {
        justify-content: center;
      }
      .space-y-1 {
        :where(& > :not(:last-child)) {
          --tw-space-y-reverse: 0;
          margin-block-start: calc(calc(var(--spacing) * 1) * var(--tw-space-y-reverse));
          margin-block-end: calc(calc(var(--spacing) * 1) * calc(1 - var(--tw-space-y-reverse)));
        }
      }
      .rounded {
        border-radius: 0.25rem;
      }
      .rounded-lg {
        border-radius: var(--radius-lg);
      }
      .bg-gray-300 {
        background-color: var(--color-gray-300);
      }
      .bg-green-500 {
        background-color: var(--color-green-500);
      }
      .bg-white {
        background-color: var(--color-white);
      }
      .p-8 {
        padding: calc(var(--spacing) * 8);
      }
      .px-4 {
        padding-inline: calc(var(--spacing) * 4);
      }
      .py-12 {
        padding-block: calc(var(--spacing) * 12);
      }
      .text-center {
        text-align: center;
      }
      .text-lg {
        font-size: var(--text-lg);
        line-height: var(--tw-leading, var(--text-lg--line-height));
      }
      .text-sm {
        font-size: var(--text-sm);
        line-height: var(--tw-leading, var(--text-sm--line-height));
      }
      .text-xs {
        font-size: var(--text-xs);
        line-height: var(--tw-leading, var(--text-xs--line-height));
      }
      .font-semibold {
        --tw-font-weight: var(--font-weight-semibold);
        font-weight: var(--font-weight-semibold);
      }
      .text-blue-600 {
        color: var(--color-blue-600);
      }
      .text-gray-600 {
        color: var(--color-gray-600);
      }
      .text-gray-700 {
        color: var(--color-gray-700);
      }
      .text-green-600 {
        color: var(--color-green-600);
      }
      .text-red-600 {
        color: var(--color-red-600);
      }
      .opacity-0 {
        opacity: 0%;
      }
      .opacity-100 {
        opacity: 100%;
      }
      .shadow-lg {
        --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
    @layer base {
      body {
        background-color: var(--color-gray-100);
        font-family: var(--font-sans);
        color: var(--color-gray-800);
      }
      h1, h2 {
        margin-bottom: calc(var(--spacing) * 6);
        text-align: center;
      }
      h1 {
        font-size: var(--text-4xl);
        line-height: var(--tw-leading, var(--text-4xl--line-height));
        --tw-font-weight: var(--font-weight-extrabold);
        font-weight: var(--font-weight-extrabold);
        color: var(--color-blue-700);
      }
      h2 {
        font-size: var(--text-2xl);
        line-height: var(--tw-leading, var(--text-2xl--line-height));
        --tw-font-weight: var(--font-weight-bold);
        font-weight: var(--font-weight-bold);
        color: var(--color-gray-700);
      }
      input[type="file"] {
        display: block;
        width: 100%;
        cursor: pointer;
        font-size: var(--text-sm);
        line-height: var(--tw-leading, var(--text-sm--line-height));
        color: var(--color-gray-500);
        &::file-selector-button {
          margin-right: calc(var(--spacing) * 4);
        }
        &::file-selector-button {
          border-radius: calc(infinity * 1px);
        }
        &::file-selector-button {
          border-style: var(--tw-border-style);
          border-width: 0px;
        }
        &::file-selector-button {
          background-color: var(--color-blue-50);
        }
        &::file-selector-button {
          padding-inline: calc(var(--spacing) * 4);
        }
        &::file-selector-button {
          padding-block: calc(var(--spacing) * 2);
        }
        &::file-selector-button {
          font-size: var(--text-sm);
          line-height: var(--tw-leading, var(--text-sm--line-height));
        }
        &::file-selector-button {
          --tw-font-weight: var(--font-weight-semibold);
          font-weight: var(--font-weight-semibold);
        }
        &::file-selector-button {
          color: var(--color-blue-700);
        }
        &:hover {
          @media (hover: hover) {
            &::file-selector-button {
              background-color: var(--color-blue-100);
            }
          }
        }
      }
      button {
        transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;
        transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
        transition-duration: var(--tw-duration, var(--default-transition-duration));
        --tw-duration: 200ms;
        transition-duration: 200ms;
      }
      button[type="submit"] {
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: calc(infinity * 1px);
        background-color: var(--color-blue-600);
        padding-inline: calc(var(--spacing) * 6);
        padding-block: calc(var(--spacing) * 2);
        --tw-font-weight: var(--font-weight-semibold);
        font-weight: var(--font-weight-semibold);
        color: var(--color-white);
        &:hover {
          @media (hover: hover) {
            background-color: var(--color-blue-700);
          }
        }
        &:disabled {
          cursor: not-allowed;
        }
        &:disabled {
          opacity: 50%;
        }
      }
      .secondary-button {
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: calc(infinity * 1px);
        background-color: var(--color-gray-300);
        padding-inline: calc(var(--spacing) * 6);
        padding-block: calc(var(--spacing) * 2);
        --tw-font-weight: var(--font-weight-semibold);
        font-weight: var(--font-weight-semibold);
        color: var(--color-gray-700);
        &:hover {
          @media (hover: hover) {
            background-color: var(--color-gray-400);
          }
        }
        &:disabled {
          cursor: not-allowed;
        }
        &:disabled {
          opacity: 50%;
        }
      }
      .spinner {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-top: 4px solid #fff;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        animation: spin 1s linear infinite;
        margin-right: 8px;
      }
      .spinner-gray {
        border: 4px solid rgba(156, 163, 175, 0.3);
        border-top: 4px solid #6b7280;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .file-item {
        margin-bottom: calc(var(--spacing) * 4);
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: space-between;
        border-radius: var(--radius-lg);
        background-color: var(--color-white);
        padding: calc(var(--spacing) * 4);
        --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
        transition-property: transform, translate, scale, rotate;
        transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
        transition-duration: var(--tw-duration, var(--default-transition-duration));
        --tw-duration: 200ms;
        transition-duration: 200ms;
        &:hover {
          @media (hover: hover) {
            scale: 1.01;
          }
        }
        @media (width >= 48rem) {
          flex-direction: row;
        }
        @media (width >= 48rem) {
          align-items: center;
        }
      }
      .file-info {
        margin-right: calc(var(--spacing) * 4);
        flex-grow: 1;
      }
      .file-name {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        font-size: var(--text-lg);
        line-height: var(--tw-leading, var(--text-lg--line-height));
        --tw-font-weight: var(--font-weight-semibold);
        font-weight: var(--font-weight-semibold);
        color: var(--color-blue-800);
      }
      .file-meta {
        font-size: var(--text-sm);
        line-height: var(--tw-leading, var(--text-sm--line-height));
        color: var(--color-gray-500);
      }
      .file-actions {
        margin-top: calc(var(--spacing) * 2);
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        @media (width >= 48rem) {
          margin-top: calc(var(--spacing) * 0);
        }
        @media (width >= 48rem) {
          flex-direction: row;
        }
        @media (width >= 48rem) {
          align-items: center;
        }
      }
      .file-actions a {
        margin-right: calc(var(--spacing) * 4);
        color: var(--color-blue-500);
        &:last-child {
          margin-right: calc(var(--spacing) * 0);
        }
        &:hover {
          @media (hover: hover) {
            text-decoration-line: underline;
          }
        }
      }
      .file-actions button {
        margin-left: calc(var(--spacing) * 4);
        cursor: pointer;
        --tw-border-style: none;
        border-style: none;
        background-color: transparent;
        padding: calc(var(--spacing) * 0);
        color: var(--color-red-500);
        &:last-child {
          margin-right: calc(var(--spacing) * 0);
        }
        &:hover {
          @media (hover: hover) {
            text-decoration-line: underline;
          }
        }
      }
      .upload-progress-container {
        height: calc(var(--spacing) * 2);
        width: 100%;
        overflow: hidden;
        border-radius: calc(infinity * 1px);
        background-color: var(--color-gray-200);
      }
      .upload-progress-bar {
        height: calc(var(--spacing) * 2);
        border-radius: calc(infinity * 1px);
        background-color: var(--color-green-500);
        transition-property: all;
        transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
        transition-duration: var(--tw-duration, var(--default-transition-duration));
        --tw-duration: 300ms;
        transition-duration: 300ms;
        --tw-ease: var(--ease-in-out);
        transition-timing-function: var(--ease-in-out);
      }
      #toast-container {
        position: fixed;
        top: calc(var(--spacing) * 6);
        right: calc(var(--spacing) * 6);
        z-index: 50;
        display: flex;
        flex-direction: column;
        :where(& > :not(:last-child)) {
          --tw-space-y-reverse: 0;
          margin-block-start: calc(calc(var(--spacing) * 4) * var(--tw-space-y-reverse));
          margin-block-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-y-reverse)));
        }
      }
      .toast {
        display: flex;
        width: 100%;
        max-width: var(--container-xs);
        align-items: center;
        border-radius: var(--radius-lg);
        background-color: var(--color-white);
        padding: calc(var(--spacing) * 4);
        color: var(--color-gray-500);
        --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
        transition-property: opacity;
        transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
        transition-duration: var(--tw-duration, var(--default-transition-duration));
        --tw-duration: 300ms;
        transition-duration: 300ms;
        --tw-ease: var(--ease-out);
        transition-timing-function: var(--ease-out);
        @media (prefers-color-scheme: dark) {
          background-color: var(--color-gray-800);
        }
        @media (prefers-color-scheme: dark) {
          color: var(--color-gray-400);
        }
      }
      .toast.success {
        color: var(--color-green-500);
        @media (prefers-color-scheme: dark) {
          color: var(--color-green-400);
        }
      }
      .toast.error {
        color: var(--color-red-500);
        @media (prefers-color-scheme: dark) {
          color: var(--color-red-400);
        }
      }
      .toast.info {
        color: var(--color-blue-500);
        @media (prefers-color-scheme: dark) {
          color: var(--color-blue-400);
        }
      }
      .toast-icon {
        display: inline-flex;
        height: calc(var(--spacing) * 8);
        width: calc(var(--spacing) * 8);
        flex-shrink: 0;
        align-items: center;
        justify-content: center;
        border-radius: var(--radius-lg);
      }
      .toast-icon.success {
        background-color: var(--color-green-100);
        color: var(--color-green-500);
        @media (prefers-color-scheme: dark) {
          background-color: var(--color-green-800);
        }
        @media (prefers-color-scheme: dark) {
          color: var(--color-green-200);
        }
      }
      .toast-icon.error {
        background-color: var(--color-red-100);
        color: var(--color-red-500);
        @media (prefers-color-scheme: dark) {
          background-color: var(--color-red-800);
        }
        @media (prefers-color-scheme: dark) {
          color: var(--color-red-200);
        }
      }
      .toast-icon.info {
        background-color: var(--color-blue-100);
        color: var(--color-blue-500);
        @media (prefers-color-scheme: dark) {
          background-color: var(--color-blue-800);
        }
        @media (prefers-color-scheme: dark) {
          color: var(--color-blue-200);
        }
      }
      .toast-message {
        margin-left: calc(var(--spacing) * 3);
        flex-grow: 1;
        font-size: var(--text-sm);
        line-height: var(--tw-leading, var(--text-sm--line-height));
        --tw-font-weight: var(--font-weight-normal);
        font-weight: var(--font-weight-normal);
      }
      .toast-close-button {
        margin-inline: calc(var(--spacing) * -1.5);
        margin-block: calc(var(--spacing) * -1.5);
        margin-left: auto;
        display: inline-flex;
        height: calc(var(--spacing) * 8);
        width: calc(var(--spacing) * 8);
        align-items: center;
        justify-content: center;
        border-radius: var(--radius-lg);
        background-color: var(--color-white);
        padding: calc(var(--spacing) * 1.5);
        color: var(--color-gray-400);
        &:hover {
          @media (hover: hover) {
            background-color: var(--color-gray-100);
          }
        }
        &:hover {
          @media (hover: hover) {
            color: var(--color-gray-900);
          }
        }
        &:focus {
          --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
          box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
        }
        &:focus {
          --tw-ring-color: var(--color-gray-300);
        }
        @media (prefers-color-scheme: dark) {
          background-color: var(--color-gray-800);
        }
        @media (prefers-color-scheme: dark) {
          color: var(--color-gray-500);
        }
        @media (prefers-color-scheme: dark) {
          &:hover {
            @media (hover: hover) {
              background-color: var(--color-gray-700);
            }
          }
        }
        @media (prefers-color-scheme: dark) {
          &:hover {
            @media (hover: hover) {
              color: var(--color-white);
            }
          }
        }
      }
      #search-input {
        margin-bottom: calc(var(--spacing) * 4);
        display: block;
        width: 100%;
        border-radius: var(--radius-md);
        border-style: var(--tw-border-style);
        border-width: 1px;
        border-color: var(--color-gray-300);
        padding-inline: calc(var(--spacing) * 4);
        padding-block: calc(var(--spacing) * 2);
        --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
        &:focus {
          border-color: var(--color-blue-500);
        }
        &:focus {
          --tw-ring-color: var(--color-blue-500);
        }
        &:focus {
          --tw-outline-style: none;
          outline-style: none;
        }
        @media (width >= 40rem) {
          font-size: var(--text-sm);
          line-height: var(--tw-leading, var(--text-sm--line-height));
        }
      }
    }
    @property --tw-translate-x {
      syntax: "*";
      inherits: false;
      initial-value: 0;
    }
    @property --tw-translate-y {
      syntax: "*";
      inherits: false;
      initial-value: 0;
    }
    @property --tw-translate-z {
      syntax: "*";
      inherits: false;
      initial-value: 0;
    }
    @property --tw-rotate-x {
      syntax: "*";
      inherits: false;
    }
    @property --tw-rotate-y {
      syntax: "*";
      inherits: false;
    }
    @property --tw-rotate-z {
      syntax: "*";
      inherits: false;
    }
    @property --tw-skew-x {
      syntax: "*";
      inherits: false;
    }
    @property --tw-skew-y {
      syntax: "*";
      inherits: false;
    }
    @property --tw-space-y-reverse {
      syntax: "*";
      inherits: false;
      initial-value: 0;
    }
    @property --tw-font-weight {
      syntax: "*";
      inherits: false;
    }
    @property --tw-shadow {
      syntax: "*";
      inherits: false;
      initial-value: 0 0 #0000;
    }
    @property --tw-shadow-color {
      syntax: "*";
      inherits: false;
    }
    @property --tw-shadow-alpha {
      syntax: "<percentage>";
      inherits: false;
      initial-value: 100%;
    }
    @property --tw-inset-shadow {
      syntax: "*";
      inherits: false;
      initial-value: 0 0 #0000;
    }
    @property --tw-inset-shadow-color {
      syntax: "*";
      inherits: false;
    }
    @property --tw-inset-shadow-alpha {
      syntax: "<percentage>";
      inherits: false;
      initial-value: 100%;
    }
    @property --tw-ring-color {
      syntax: "*";
      inherits: false;
    }
    @property --tw-ring-shadow {
      syntax: "*";
      inherits: false;
      initial-value: 0 0 #0000;
    }
    @property --tw-inset-ring-color {
      syntax: "*";
      inherits: false;
    }
    @property --tw-inset-ring-shadow {
      syntax: "*";
      inherits: false;
      initial-value: 0 0 #0000;
    }
    @property --tw-ring-inset {
      syntax: "*";
      inherits: false;
    }
    @property --tw-ring-offset-width {
      syntax: "<length>";
      inherits: false;
      initial-value: 0px;
    }
    @property --tw-ring-offset-color {
      syntax: "*";
      inherits: false;
      initial-value: #fff;
    }
    @property --tw-ring-offset-shadow {
      syntax: "*";
      inherits: false;
      initial-value: 0 0 #0000;
    }
    @property --tw-border-style {
      syntax: "*";
      inherits: false;
      initial-value: solid;
    }
    @property --tw-duration {
      syntax: "*";
      inherits: false;
    }
    @property --tw-ease {
      syntax: "*";
      inherits: false;
    }
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
    @layer properties {
      @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {
        *, ::before, ::after, ::backdrop {
          --tw-translate-x: 0;
          --tw-translate-y: 0;
          --tw-translate-z: 0;
          --tw-rotate-x: initial;
          --tw-rotate-y: initial;
          --tw-rotate-z: initial;
          --tw-skew-x: initial;
          --tw-skew-y: initial;
          --tw-space-y-reverse: 0;
          --tw-font-weight: initial;
          --tw-shadow: 0 0 #0000;
          --tw-shadow-color: initial;
          --tw-shadow-alpha: 100%;
          --tw-inset-shadow: 0 0 #0000;
          --tw-inset-shadow-color: initial;
          --tw-inset-shadow-alpha: 100%;
          --tw-ring-color: initial;
          --tw-ring-shadow: 0 0 #0000;
          --tw-inset-ring-color: initial;
          --tw-inset-ring-shadow: 0 0 #0000;
          --tw-ring-inset: initial;
          --tw-ring-offset-width: 0px;
          --tw-ring-offset-color: #fff;
          --tw-ring-offset-shadow: 0 0 #0000;
          --tw-border-style: solid;
          --tw-duration: initial;
          --tw-ease: initial;
        }
      }
    }
</style>
  </head>
  <body class="container mx-auto py-12 px-4">
    <h1>File Server</h1>

    <form id="upload-form" class="flex flex-col items-center justify-center bg-white p-8 rounded-lg shadow-lg mb-8">
      <label for="file-upload" class="w-full">
          <input type="file" name="file" id="file-upload" class="mb-4" multiple required/>
      </label>

      <div id="upload-queue" class="w-full mb-4 hidden">
          <h3 class="text-lg font-semibold mb-2">Upload Queue:</h3>
          <ul id="upload-items" class="text-sm text-gray-700 space-y-1">
          </ul>
          <button type="button" id="clear-queue-button" class="secondary-button mt-4 text-sm">Clear Queue</button>
      </div>

      <button type="submit" id="upload-button">
          <span id="button-text">Upload Files</span>
          <div id="button-spinner" class="spinner hidden"></div>
      </button>
    </form>

    <div class="mb-6">
        <input type="text" id="search-input" placeholder="Search files..." />
    </div>

    <div id="file-list">
      <h2>Uploaded Files</h2>
      <div id="files">
        <p class="text-center text-gray-600"><div class="spinner spinner-gray mx-auto mb-2"></div> Loading files...</p>
      </div>
    </div>

    <div id="toast-container"></div>

    <script>
      const form = document.getElementById('upload-form')
      const fileListContainer = document.getElementById('files')
      const uploadButton = document.getElementById('upload-button')
      const buttonText = document.getElementById('button-text')
      const buttonSpinner = document.getElementById('button-spinner')
      const fileInput = document.getElementById('file-upload')
      const uploadQueue = document.getElementById('upload-queue')
      const uploadItemsList = document.getElementById('upload-items')
      const searchInput = document.getElementById('search-input')
      const toastContainer = document.getElementById('toast-container')
      const clearQueueButton = document.getElementById('clear-queue-button')

      let allFiles = []; // To store all fetched files for search
      let currentUploads = []; // Keep track of ongoing uploads if needed (not used for aborting in this version)

      // --- Toast Notification System ---
      function showToast(message, type = 'info', duration = 5000) {
        const toast = document.createElement('div')
        toast.className = `toast ${type} opacity-0 transform translate-x-full`
        toast.setAttribute('role', 'alert')

        const iconHtml = {
            'success': '<svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/></svg>',
            'error': '<svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM10 15a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm1-4a1 1 0 1 1-2 0v-3a1 1 0 1 1 2 0v3Z"/></svg>',
            'info': '<svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM10 15a1 1 0 1 1 0-2 1 1 0 0 1 0 2Zm1-4a1 1 0 1 1-2 0V6a1 1 0 0 1 2 0v5Z"/></svg>'
        }

        toast.innerHTML = `
            <div class="toast-icon ${type}">
                ${iconHtml[type]}
                <span class="sr-only">${type.charAt(0).toUpperCase() + type.slice(1)} icon</span>
            </div>
            <div class="toast-message">${message}</div>
            <button type="button" class="toast-close-button" data-dismiss-target=".toast" aria-label="Close">
                <span class="sr-only">Close toast</span>
                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                </svg>
            </button>
        `

        toastContainer.appendChild(toast)

        // Animate in
        requestAnimationFrame(() => {
             toast.classList.remove('opacity-0', 'translate-x-full');
             toast.classList.add('opacity-100', 'translate-x-0');
        })


        const closeButton = toast.querySelector('.toast-close-button')
        closeButton.addEventListener('click', () => dismissToast(toast))

        if (duration > 0) {
          setTimeout(() => dismissToast(toast), duration)
        }
      }

      function dismissToast(toast) {
          toast.classList.remove('opacity-100', 'translate-x-0');
          toast.classList.add('opacity-0', 'translate-x-full');
          toast.addEventListener('transitionend', () => toast.remove());
      }


      // --- File Handling and Upload ---

      function formatSize(size) {
        const i = size === 0 ? 0 : Math.floor(Math.log(size) / Math.log(1024))
        return parseFloat((size / Math.pow(1024, i)).toFixed(2)) + ' ' + ['B', 'KB', 'MB', 'GB'][i]
      }
      function formatDate(date) {
        return new Date(date).toLocaleString()
      }

      async function uploadFile(file, listItem) {
        return new Promise((resolve, reject) => {
            const formData = new FormData();
            formData.append('file', file);

            const xhr = new XMLHttpRequest();
            const url = '/upload';

            xhr.open('POST', url, true);

            xhr.upload.onprogress = (event) => {
                if (event.lengthComputable) {
                    const percentComplete = (event.loaded / event.total) * 100;
                    updateUploadProgress(listItem, percentComplete);
                }
            };

            xhr.onload = () => {
                if (xhr.status >= 200 && xhr.status < 300) {
                    try {
                        const data = JSON.parse(xhr.responseText);
                        if (data.file_path) {
                            updateUploadStatus(listItem, 'Success', 'text-green-600');
                            showToast(`${file.name} uploaded successfully!`, 'success');
                            resolve(data);
                        } else {
                            updateUploadStatus(listItem, 'Failed', 'text-red-600');
                            showToast(`${file.name} upload failed: ${data.error || 'Unknown error'}`, 'error');
                            reject(new Error(data.error || 'Unknown upload error'));
                        }
                    } catch (e) {
                        updateUploadStatus(listItem, 'Failed', 'text-red-600');
                        showToast(`${file.name} upload failed: Invalid server response.`, 'error');
                        console.error('Failed to parse JSON response:', e);
                        reject(e);
                    }
                } else {
                    updateUploadStatus(listItem, 'Failed', 'text-red-600');
                     showToast(`${file.name} upload failed with status: ${xhr.status}`, 'error');
                    console.error('Upload failed with status:', xhr.status, xhr.responseText);
                    reject(new Error(`Upload failed with status ${xhr.status}`));
                }
            };

            xhr.onerror = () => {
                updateUploadStatus(listItem, 'Failed', 'text-red-600');
                 showToast(`${file.name} upload failed due to network error.`, 'error');
                console.error('Network error during upload of', file.name);
                reject(new Error('Network error'));
            };

            updateUploadStatus(listItem, 'Uploading...', 'text-blue-600');
            xhr.send(formData);
        });
      }

      function addFileToQueue(file) {
          const listItem = document.createElement('li');
          listItem.className = 'flex items-center justify-between';
          listItem.innerHTML = `
              <span>${file.name} (${formatSize(file.size)})</span>
              <div class="flex items-center">
                  <span class="status mr-2 text-gray-600 text-xs">Pending</span>
                  <div class="upload-progress-container w-20 h-2 bg-gray-300 rounded hidden">
                      <div class="upload-progress-bar h-2 bg-green-500 rounded" style="width: 0%;"></div>
                  </div>
              </div>
          `;
          uploadItemsList.appendChild(listItem);
          return listItem;
      }

      function updateUploadStatus(listItem, statusText, statusClass) {
          const statusSpan = listItem.querySelector('.status');
          statusSpan.textContent = statusText;
          statusSpan.className = `status mr-2 text-xs ${statusClass}`;
      }

      function updateUploadProgress(listItem, percent) {
          const progressContainer = listItem.querySelector('.upload-progress-container');
          const progressBar = listItem.querySelector('.upload-progress-bar');
          progressContainer.classList.remove('hidden');
          progressBar.style.width = `${percent}%`;
      }

      function clearUploadQueue() {
          uploadItemsList.innerHTML = '';
          uploadQueue.classList.add('hidden');
          fileInput.value = '';
          showToast('Upload queue cleared.', 'info', 2000);
      }

      async function processUploadQueue(files) {
          uploadButton.disabled = true;
          buttonText.textContent = 'Uploading...';
          buttonSpinner.classList.remove('hidden');
          clearQueueButton.disabled = true;

          uploadQueue.classList.remove('hidden');
          uploadItemsList.innerHTML = '';

          for (const file of files) {
              const listItem = addFileToQueue(file);
              try {
                  await uploadFile(file, listItem);
              } catch (error) {
                continue;
              }
          }

          uploadButton.disabled = false;
          buttonText.textContent = 'Upload Files';
          buttonSpinner.classList.add('hidden');
          clearQueueButton.disabled = false;

          fileInput.value = '';
          fetchFiles();
      }


      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const files = fileInput.files;
        if (files.length > 0) {
            processUploadQueue(files);
        } else {
             showToast('Please select files to upload.', 'info');
        }
      });

      fileInput.addEventListener('change', () => {
        if (fileInput.files.length > 0) {
            uploadQueue.classList.remove('hidden');
            uploadItemsList.innerHTML = '';
            Array.from(fileInput.files).forEach(file => {
                addFileToQueue(file);
            });
        } else {
            uploadQueue.classList.add('hidden');
             uploadItemsList.innerHTML = '';
        }
         uploadButton.disabled = fileInput.files.length === 0;
          clearQueueButton.disabled = fileInput.files.length === 0;
      });


      // --- File Listing and Search ---
      function renderFiles(filesToRender) {
        fileListContainer.innerHTML = ''

         if (filesToRender.length === 0) {
            fileListContainer.innerHTML = '<p class="text-center text-gray-600">No files found.</p>';
            return
        }

        filesToRender
          .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
          .forEach((file) => {
            const fileItem = document.createElement('div')
            fileItem.className = 'file-item'
            fileItem.innerHTML = `
            <div class="file-info">
              <div class="file-name" title="${file.name}">${file.name}</div>
              <div class="file-meta">
                <span>${formatSize(file.size)}</span> |
                <span>Uploaded on ${formatDate(file.created_at)}</span> |
                <span>Storage: ${file.storage_type}</span>
              </div>
            </div>
            <div class="file-actions">
              <a href="/files/uploads/${file.id}" target="_blank" rel="noopener noreferrer">Download</a>
              <a href="#" onclick="event.preventDefault(); copyToClipboard('${window.location.origin}/files/uploads/${file.id}')">Copy Link</a>
              <button onclick="event.preventDefault(); deleteFile('${file.id}', this)">Delete</button>
            </div>
          `
            fileListContainer.appendChild(fileItem)
          })
      }


      async function fetchFiles() {
        if (allFiles.length === 0) {
             fileListContainer.innerHTML = '<p class="text-center text-gray-600"><div class="spinner spinner-gray mx-auto mb-2"></div> Loading files...</p>'
        }

        const response = await fetch('/files/uploads?limit=500')

        if (!response.ok) {
          console.error('Failed to fetch files')
          fileListContainer.innerHTML = '<p class="text-center text-red-600">Failed to load files.</p>'
          showToast('Failed to fetch file list.', 'error');
          return
        }

        const data = await response.json()
        allFiles = data
        filterFiles();
      }

      function filterFiles() {
          const searchTerm = searchInput.value.toLowerCase();
          const filteredFiles = allFiles.filter(file =>
              file.name.toLowerCase().includes(searchTerm) ||
              file.storage_type.toLowerCase().includes(searchTerm) ||
              (file.id && file.id.toLowerCase().includes(searchTerm))
          );
          renderFiles(filteredFiles);
      }

      // --- Delete Functionality ---
      async function deleteFile(fileId, buttonElement) {
          if (!confirm('Are you sure you want to delete this file? This cannot be undone.')) {
              return;
          }

          buttonElement.disabled = true;
          buttonElement.textContent = 'Deleting...';


          try {
              const response = await fetch(`/files/uploads/${fileId}`, {
                  method: 'DELETE',
              });

              if (!response.ok) {
                  const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));
                  console.error('Failed to delete file:', response.status, errorData);
                  showToast(`Failed to delete file: ${errorData.error || response.statusText}`, 'error');
                  buttonElement.disabled = false;
                  buttonElement.textContent = 'Delete';
                  return;
              }

              showToast('File deleted successfully!', 'success');
              allFiles = allFiles.filter(file => file.id !== fileId);
              filterFiles();

          } catch (error) {
              console.error('Network error during file deletion:', error);
              showToast('Network error during file deletion.', 'error');
              buttonElement.disabled = false;
              buttonElement.textContent = 'Delete';
          }
      }


      // --- Utility Functions ---
      async function copyToClipboard(text) {
          try {
              await navigator.clipboard.writeText(text);
              showToast('Link copied to clipboard!', 'success', 3000);
          } catch (err) {
              console.error('Failed to copy text: ', err);
              showToast('Failed to copy link.', 'error');
          }
      }

      searchInput.addEventListener('input', filterFiles);
      clearQueueButton.addEventListener('click', clearUploadQueue);

      fileInput.addEventListener('change', () => {
        if (fileInput.files.length > 0) {
            uploadQueue.classList.remove('hidden');
            uploadButton.disabled = false;
            clearQueueButton.disabled = false;

            uploadItemsList.innerHTML = '';
            Array.from(fileInput.files).forEach(file => {
                addFileToQueue(file);
            });
        } else {
            uploadQueue.classList.add('hidden');
            uploadButton.disabled = true;
            clearQueueButton.disabled = true;
             uploadItemsList.innerHTML = '';
        }
      });

      document.addEventListener('DOMContentLoaded', () => {
           uploadButton.disabled = true;
           clearQueueButton.disabled = true;
           fetchFiles();
      });

      setInterval(fetchFiles, 15000)

    </script>
  </body>
</html>
